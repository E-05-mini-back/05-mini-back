# mini_project

# 🍕 리뷸랭 🍔

<img src="https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Ff609c3dc-18f3-4512-acec-dbf95b04865c%2F%25EB%25A6%25AC%25EB%25B7%25B8%25EB%259E%25AD2.png?table=block&id=8463b264-1c53-466f-bfad-f49d03390bc7&spaceId=04ba4e34-01a6-4258-86ae-e4cca440ea3d&width=2000&userId=fff9d70b-876e-473f-b4bb-dbb5727ac5b1&cache=v2">

# ✨ 프로젝트 소개

- 💁🏻‍♀️배달 음식 리뷰 + 미슐랭 ⇒ 리뷸랭! 🙋🏻‍♂️

- 배달 음식의 여러가지 리뷰들을 카테고리 별로 공유하는 작은 소셜 SNS

- 보편적이지만 친숙한 배달음식에 대한 리뷰를 사진과 함께 공유할 수 있는 페이지

<br>

---

# 🌎 Web Site

http://shshinkitec.shop/api/post (임시)

<br>

---

# 🎬 시연영상

나중에 링크 올릴예정(임시)

<br>

---

# 😎 팀원

👉 BACK-END

- 신현호 : 댓글 CRUD
- 시진엽 : 게시글 CRUD
- 김동일 : 로그인 및 회원가입

<br>
👉 FRONT-END

- 최효선 : 상세페이지
- 김도우 : 로그인 및 회원가입
- 이호진 : 메인페이지

프론트 : https://github.com/hanghae8-week6-team5-FE/team5

<br>

---

# 기능 구현

👉 회원가입 및 로그인 기능 사용

👉 나만의 배달 음식 리뷰를 사진과 설명을 통해 모두에게 공유

👉 여러 사람들의 리뷰들 한눈에 확인 가능

👉 리뷰 클릭시 해당 리뷰의 상세 정보와 댓글 확인 가능

👉 리뷰에 댓글 기능으로 여러 사람들과 소통

<br>

---

# 🛠 tools

<!-- <img src="https://img.shields.io/badge/이름-색상코드?style=flat-square&logo=로고명&logoColor=로고색"/> -->

📌 BackEnd

<img src="https://img.shields.io/badge/javascript-333333?style=flat-square&logo=javascript&logoColor=yellow"/> <img src="https://img.shields.io/badge/mysql-3333ff?style=flat-square&logo=firebase&logoColor=white"/>
<img src="https://img.shields.io/badge/express-666666?style=flat-square&logo=express&logoColor=white"/> <img src="https://img.shields.io/badge/Node.js-33cc00?style=flat-square&logo=Node.js&logoColor=white"/>

<img src="https://img.shields.io/badge/NPM-33cc00?style=flat-square&logo=NPM.js&logoColor=red"/> <img src="https://img.shields.io/badge/JSON WEB TOKEN-333333?style=flat-square&logo=json web token&logoColor=white"/> <img src="https://img.shields.io/badge/AWS-ffcc33?style=flat-square&logo=AWS&logoColor=white"/>
<img src="https://img.shields.io/badge/github-181717?style=flat-square&logo=github&logoColor=white"/> <img src="https://img.shields.io/badge/sequelize-52B0E7?style=flat-square&logo=sequelize&logoColor=black"/>

<br>

---

# API 명세서

![uml 재료 1](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/2300f852-ed44-4936-ac0b-0546bcf0944a/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220815%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220815T071658Z&X-Amz-Expires=86400&X-Amz-Signature=3a03cded3db2403ffac66bfee79b7b27606788c5a22382030a324fd0eaa77c33&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22Untitled.png%22&x-id=GetObject)

![uml 재료 2](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/551c5995-8fe0-41da-bfc5-155be0f83b67/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220815%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220815T071839Z&X-Amz-Expires=86400&X-Amz-Signature=eab9f90124d6855e39cb7fe52ab874b9fa88dd0a028127d8cc9565471ef63e94&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22Untitled.png%22&x-id=GetObject)

![uml 재료 3](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/6a19a44d-f6b3-40a2-abdb-cef796f6239b/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220815%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220815T071948Z&X-Amz-Expires=86400&X-Amz-Signature=dcf67ee30fbe7f580da96f7d0e4af4ac3423402be3be1073bd1de2d328504fed&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22Untitled.png%22&x-id=GetObject)

![uml 재료 4](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/2fe88852-abb6-4164-a77c-8610e6a4a863/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220815%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220815T072410Z&X-Amz-Expires=86400&X-Amz-Signature=0ebdf03e819ec7df1307013aee763cf9667442ceb9c9bcd112a74e6e6d3a8c43&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22Untitled.png%22&x-id=GetObject)

![uml 재료 5](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/04347377-0889-4143-8040-e20f5b2dabfe/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220815%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220815T072445Z&X-Amz-Expires=86400&X-Amz-Signature=e356eab7f352c976cf2427b6f48bccee39da15e277d7b08050845ce29942d73c&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22Untitled.png%22&x-id=GetObject)

---

# 💎BE 우리가 새롭게 도전한 기술들

1. .env로 환경변수 설정해서 중요한 키값을 환경변수로 처리하여 다른사람이 보지못하게 구현.

2. ~~해싱을 사용해서 사용자의 비밀번호가 DB에 암호화되서 저장되게끔 구현~~

3. DB 를 MY SQL 을 사용

4. MY SQL 을 사용할 때 다른 테이블의 키값을 가져오기 위해서 외래키를 사용

5. ~~카테고리별 게시물을 필터링~~

6. ~~게시물, 댓글 수정시 기존의 정보를 불러와서 수정~~

---

😥 BE: 개발하면서 어려웠던점

1. mysql를 사용함으로써 테이블의 생성 및 관계 설정

2. 처음에 API명세서를 확실하게 정하지 않아 기능구현시 FE,BE 간의 소통이 쉽지 않았음

3. FE의 기술이나 동작 원리를 잘 알지 못해, 토큰을 주고 받는 부분이 어려웠음

4.

---

🤟 Trouble Shooting
(우리 팀이 해결한 문제 정리)

1.  이미지 파일을 multer를 사용해서 구현은 했으나 FE분들이랑 상의를 통해 multer를 사용하지 않고, 파이어베이스에 먼저 사진을 저장하고 URL을 데이터 베이스에 저장하게 했습니다.

2.  mysql을 auto increment를 사용하니 boardId 가 null값으로 나오는 부분에 대해 FE쪽에서 boardId를 필요로 해서 userCheck.boardId = userCheck['null']; userCheck에 대한 null 변수에 할당되어 있는 값을 boardId로 설정

3.  로그인

3-1. passport를 이용하여 SNS(카카오톡)로그인 기능 구현을 했으나 FE와 상의 후 사용하지 않음.

3-2 , FE 토큰 헤더가 Bearer로 서버로 전달하지 않음 => Bearer, token 을 split(''),으로 받지 않고 const { authorization } = req.headers; 받어서 FE로 response

3-3 . FE 요청으로 로그인시 닉네임 넘겨달라는 부분 =>
user (email.passwoerd)확인 완료시 token만발행 => Board, User 외래키를 잡아(1:n), attributes: ['nickname', 'password', 'userId', 'email'], where: { email } =>
사용하여 유저 정보 넘겨 받은뒤에 user.nickname을 token과 같이 response

3-4 . 암호화 : Bcrypt.hashSync(password, 10)  
복호화 : Bcrypt.compareSync(password, user.password) => 비밀번호 암호화한 값과 복호화한 값이 일치하지 않는 오류 발생

암호화 : const salt = await Bcrypt.genSalt();  
 const pwhash = await Bcrypt.hash(password, salt);

복호화 : Bcrypt.compareSync(password, user.password) => 오류 해결
